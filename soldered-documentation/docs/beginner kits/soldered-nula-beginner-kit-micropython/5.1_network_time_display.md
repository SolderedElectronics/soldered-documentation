---
slug: /soldered-nula-beginner-kit-micropython/display-time
title: 5.1. WiFi Time Display
id: display-time
hide_title: true
---

<SectionTitle title="5.1. WiFi Time Display" backgroundImage="/img/arduino_bg.jpg" />

One of the key features of the **NULA Mini** board is its WiFi support. It has the ability to either connect to an existing WiFi network (set as a station), or it can create its own WiFi network and let other WiFi capable devices connect to it (set as access point). On this example page we'll show you how to connect to an existing WiFi network fetching the time and updating the **Real Time Clock (RTC)** using **NTP (Network Time Protocol)** and finally displaying it on 16x2 LCD display.

**At the end of this example you will learn:**
- How to connect to an existing WiFi network
- How to fetch time from NTP and update the RTC

---

**Parts required:**
- **Soldered NULA Mini Board**
- **16x2 LCD Display**
- **1 x Qwiic cable**
- **WiFi connection**

## Putting the components together

<CenteredImage src="/img/under_construction.png" alt="Under construction" width="400px" />

- Connect the LCD via Qwiic cable to the NULA Mini board

## Code Example

To be able to connect to a WiFi network import the `network` library, to fetch the time import `ntptime` library.

```python
import network
import ntptime
import time
from machine import I2C, Pin
from LCD import LCD_I2C
```

Create a `LCD_I2C` object and initialize it over I2C, turn on the backlight and start communication with the LCD over I2C.

```python
# If you aren't using the Qwiic connector, manually enter your I2C pins
i2c = I2C(0, scl=Pin(7), sda=Pin(6))
lcd = LCD_I2C(i2c)

# Initialize sensor over Qwiic
# lcd = LCD_I2C()

lcd.backlight()

lcd.begin()
```

Set the `ssid` and `password` variables to hold the SSID and password of the existing WiFi network you want to connect to.

```python
ssid = ""
password = ""
```

After setting the ssid and password, create a `WLAN` network object and set the board to act as a WiFi station. Activate the network interface and connect to the network using `ssid` and `password` variables.

```python
# Create a WLAN network object and set the board as a WiFi station to connect to WiFi access points
wlan = network.WLAN(network.STA_IF)

wlan.active(True)
wlan.connect(ssid, password)
```

Ensure that the board is connected to the WiFi network before proceeding with the further code. This ensures that we don't fetch the time while not connected.

```python
while wlan.isconnected() == False:
  pass
```

By calling `ntptime.settime()` function, we send a request to NTP server to get the current **UTC (Coordinated Universal Time)** time. After getting time from the internet it then synchronizes the NULA Mini's internal RTC. This function can be called **once (on boot / on WiFi connect) every 24 hours**, unless you need more precise timing then you can update it more frequently. This is done because the boards built-in RTC can drift a couple of seconds per day.

```python
ntptime.settime()

# Keep last second measurement
last_second = 0
```

In the main loop of the program, `time.localtime()` returns a `tupple`: (year, month, day, hour, minute, second, weekday, yearday), which we then store in `current_time` so we can access each date/time parameter individually. The display is updated every second by comparing the last stored second value against the newly fetched value.

```python
while True:
    current_time = time.localtime()
    # current_time = time.localtime(local_seconds)
    
    # time.localtime returns a tuple: (year, month, day, hour, minute, second, weekday, yearday)
    # Access each parameter and assign it to a time variable
    # Date
    year = current_time[0]
    month = current_time[1]
    day = current_time[2]
    # Time
    hour = current_time[3]
    minute = current_time[4]
    second = current_time[5]
    
    # Update the display every second
    if second != last_second:
        lcd.clear()
        lcd.setCursor(0, 0)
        lcd.print("Date: ")
        lcd.setCursor(6, 0)
        # Print date
        lcd.print("{:02d}/{:02d}/{:04d}".format(day, month, year))

        lcd.setCursor(0, 1)
        lcd.print("Time: ")
        lcd.setCursor(6, 1)
        # Print time
        lcd.print("{:02d}:{:02d}:{:02d}".format(hour, minute, second))
        # Update last second measurement
        last_second = second
```

## Full Example

<QuickLink 
  title="5.1_Network_Time_Display.py"
  url="https://github.com/SolderedElectronics/PRIMJER" 
/>