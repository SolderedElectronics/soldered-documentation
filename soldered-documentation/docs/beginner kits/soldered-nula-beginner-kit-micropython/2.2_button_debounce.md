---
slug: /soldered-nula-beginner-kit-micropython/button-debounce
title: 2.2. Button Debounce
id: button-debounce
hide_title: true
---

<SectionTitle title="2.2. Button Debounce" backgroundImage="/img/arduino_bg.jpg" />

<CenteredImage src="/img/under_construction.png" alt="Under construction" caption="Short example demonstration video" width="700px" />

Another fundamental concept in embedded systems, alongside controlling pin states, is reading the state of a pin. By declaring a pin as an input, we can determine its state (HIGH or LOW), we can also read analog value, detect edges (FALLING, RISING), interrupts and more. This example focuses on reading basic digital input from a pushbutton.

**At the end of this example you will learn:**
- How to read digital inputs
- PULL-UP / PULL-DOWN concept
- How to debounce an input

---

**Parts required:**
- **Soldered NULA Mini Board**
- **Breadboard**
- **1 x LED (any color)**
- **2 x 330 Ohm resistor**
- **1 x Pushbutton**
- **Some jumper wires**

**Pushbutton**

- Before you assemble the circuit it's important to know how a pushbutton works. 
- A pushbutton is a simple switch that remains open when it is **not pressed**, but closes the circuit when it is **pressed** allowing current to flow. 
- Simple pushbuttons are "momentary", meaning the only make contact while being pressed, so to ensure stable reading, a **PULL-UP** or **PULL-DOWN** resistor is used. See this **[blog post](https://soldered.com/learn/what-is-a-pull-up-pull-down-resistor)** for an in-depth tutorial on this concept.

<CenteredImage src="/img/under_construction.png" alt="Under construction" caption="Internal pushbutton design" width="400px" />

## Putting the components together

<CenteredImage src="/img/under_construction.png" alt="Under construction" caption="Required components" width="400px" />

- Place the pushbutton on the breadboard, connect one terminal of the button to pin 19 and ground with 330 Ohm resistor. Connect the other terminal to 3.3V or VCC.
- To connect an LED, connect the longer (positive) leg to the pin 5 via jumper wire, and shorter (negative) leg to GND via 330 Ohm resistor.

<CenteredImage src="/img/under_construction.png" alt="Under construction" caption="Components connected together" width="400px" />

## Code Example

Import necessary libraries for pin declaration and delay.

```python
from machine import Pin
import time
```

Define pins used for LED and Pushbutton.

```python
led_pin = 5
button_pin = 19
```

Initialize the LED as an `OUTPUT` and button as an `INPUT` with PULL_DOWN configuration which sets the pins value LOW (0) while not pressed.

```python
led = Pin(led_pin, Pin.OUT)
btn = Pin(button_pin, Pin.IN, Pin.PULL_DOWN)
```

Set initial LED state to low (OFF), and declare variable to keep track of last LED state. Because we declared pushbutton as `PULL_DOWN`, 0 means not pressed.

```python
led.value(0)
last_state = 0
```

Infinite loop that continuously checks the button and updates the LED. `If` statement checks for a falling edge: the button was previously **not pressed** (last_state == 0) and now **is pressed** (current_state == 1). Method `led.toggle()` flips the LED state. A short delay of 20 milliseconds is added to **debounce** the input because pushbuttons can often generate multiple presses very quickly due to their mechanical and physical issues, thus fooling the program. At the end of the loop we update the `last_state` variable and pause the program briefly to allow some time for CPU.

```python
while True:
    current_state = btn.value()
    
    if last_state == 0 and current_state == 1:
        led.toggle()
        time.sleep(0.02)
    
    last_state = current_state
    time.sleep(0.1)
```

## Full Example

<QuickLink 
  title="2.1_Button_Toggle_LED.py" 
  url="https://github.com/SolderedElectronics/PRIMJER" 
/>