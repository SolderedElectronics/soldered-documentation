---
slug: /soldered-nula-beginner-kit-micropython/sending-data
title: 6.3. Sending data
id: sending-data
hide_title: true
---

<SectionTitle title="6.3. Sending data" backgroundImage="/img/arduino_bg.jpg" />

<CenteredImage src="/img/under_construction.png" alt="Under construction" caption="Short example demonstration video" width="700px" />

Sometimes when measuring sensor data we want to save it for later analysis or monitor it in real time. With the NULA Mini's board built in WiFi, we can easily send data to **IoT (Internet of Things)** platforms or other online web services. In this example we will be sending measured temperature and humidity values from **SHTC3** sensor in JSON format to **Webhook.site**, a free online tool that lets you handle HTTP requests (useful for testing).

**At the end of this example you will learn:**
- How to save measured data in JSON format
- How to send a POST request to specific URL and handle the response

---

**Parts required:**
- **Soldered NULA Mini board**
- **Breadboard**
- **SHTC3 sensor**
- **1 x Qwiic cable**
- **WiFi connection**

## Putting the components together

<CenteredImage src="/img/under_construction.png" alt="Under construction" caption="Required components" width="400px" />

- Use a Qwiic cable to connect the SHTC3 sensor to NULA Mini

<CenteredImage src="/img/under_construction.png" alt="Under construction" caption="Components connected together" width="400px" />

## Code Example

Start by including necessary libraries: `network` used to handle WiFi connection, `urequests` for handling requests to web server, `json` library for working with JSON data.

```python
import network
import urequests
import json
import time
from machine import I2C, Pin
from SHTC3 import SHTC3
```

Initialize SHTC3 sensor module over I2C

```python
i2c_shtc3 = I2C(0, scl=Pin(7), sda=Pin(6))
shtc3 = SHTC3(i2c_shtc3)
```

Set the `ssid` and `password` variables to hold the SSID and password of the existing WiFi network you want to connect to.

```python
ssid = ""
password = ""
```

Insert your unique ID in the URL which can be found on their website.

```python
WEBHOOK_URL = "https://webhook.site/YOUR-UNIQUE-ID"
```

Create a `WLAN` network object and set the board to act as a WiFi station. Activate the network interface, initialize connection to the network using `ssid` and `password` variables and wait until the board is connected before proceeding.

```python
wlan = network.WLAN(network.STA_IF)

wlan.active(True)
wlan.connect(ssid, password)

while wlan.isconnected() == False:
    pass
```

After successful connection print the IP network parameters (IP address, subnet mask, gateway and DNS server).

```python
print('Connection successful')
print(f"IP config: {wlan.ifconfig()}")
```

Declare timer variable to send data every minute, setting it this way instead of `last_send_time = 0` sends data immediately.

```python
last_send_time = time.ticks_ms() - 60000
```

Main loop that constantly samples values and saves them to variables. If a minute passed, save measured data in `JSON` format and send a `POST` request to specified URL with measured data. You should get `200 - OK` successful status code by server.

```python
while True:
    # Sample the values before reading them
    shtc3.sample()
    # Read the temperature and humidity values that were just sampled and store them in variables
    temperature = shtc3.readTemperature()
    humidity = shtc3.readHumidity()
    
    # Print measured values
    print(f"Temperature: {temperature}, Humidity: {humidity}\n")
    
    # If one minute has passed, send measured data through POST request
    if time.ticks_diff(time.ticks_ms(), last_send_time) > 60000:
        # Save measured data in JSON format
        data = {
            "temperature" : temperature,
            "humidity" : humidity
            }
        try:
            # Send a POST request to the specified URL with data in JSON format
            response = urequests.post(WEBHOOK_URL, json=data)
            
            # Print HTTP status code returned by the server
            print("POST status: ", response.status_code)
            # Print the response body returned by the server
            print("POST body: ", response.text)
            # Close the response to free up memory
            response.close()
            
        # Catch any exception (network issue, timeout, ...) and print it out
        except Exception as e:
            print("POST failed: ", e)
            
        # Update the timestamp of last time data was sent
        last_send_time = time.ticks_ms()
    
    # Add small delay to program
    time.sleep_ms(200)
```

## Full Example

<QuickLink 
  title="6.2_Send_Measured_Data_WiFi.py"
  url="https://github.com/SolderedElectronics/PRIMJER" 
/>